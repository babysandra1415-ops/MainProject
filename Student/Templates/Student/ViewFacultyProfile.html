<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ faculty.faculty_name }} Profile</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .like-btn {
            cursor: pointer;
            font-size: 24px; 
            transition: transform 0.2s;
        }
        .like-btn:hover {
            transform: scale(1.3);
        }
    </style>
</head>
<body>

<table border="1" align="center" cellpadding="10">
    <tr>
        <td colspan="2" align="center">
            {% if faculty.faculty_photo %}
                <img src="{{ faculty.faculty_photo.url }}" width="300" height="300" alt="faculty Photo"/>
            {% endif %}
        </td>
    </tr>
   
    <tr>
        <td><b>Name</b></td>
        <td>{{ faculty.faculty_name }}</td>
    </tr>
    <tr>
        <td><b>Email</b></td>
        <td>{{ faculty.faculty_email }}</td>
    </tr>
    <tr>
        <td><b>Address</b></td>
        <td>{{ faculty.faculty_bio }}</td>
    </tr>
    <tr>
        <td><b>Contact</b></td>
        <td>{{ faculty.faculty_contact }}</td>
    </tr>
</table>

<br>

<table align="center" width="60%" cellpadding="6" cellspacing="0">
    {% for i in post %}
    <tr>
        <td width="15%" align="center">
            {% if i.faculty and i.faculty.faculty_photo %}
                <img src="{{ i.faculty.faculty_photo.url }}" width="50" height="50" alt="{{ i.faculty.faculty_name }}">
            {% elif i.student and i.student.student_photo %}
                <img src="{{ i.student.student_photo.url }}" width="50" height="50" alt="{{ i.student.student_name }}">
            {% elif i.college and i.college.college_logo %}
                <img src="{{ i.faculty.faculty_logo.url }}" width="50" height="50" alt="{{ i.faculty.faculty_name }}">
            {% endif %}
        </td>
        <td width="85%">
            <b>
                {% if i.faculty %}
                    {{ i.faculty.faculty_name }}
                {% elif i.student %}
                    {{ i.student.student_name }}
                {% elif i.college %}
                    {{ i.college.college_name }}
                {% endif %}
            </b>
        </td>
    </tr>

    {% if i.post_photo %}
    <tr>
        <td colspan="2" align="center">
            <img src="{{ i.post_photo.url }}" width="100%" alt="Post Image">
        </td>
    </tr>
    {% endif %}

    <!-- Action Row -->
    <tr>
         <td colspan="2">
            <span class="like-btn" data-post="{{ i.id }}">
                {% if i.id in liked_posts %}
                    ‚ù§Ô∏è
                {% else %}
                    ü§ç
                {% endif %}
            </span>
            &nbsp;
            <a href="{% url 'Student:Comment' i.id %}">Comment</a>
        </td>
    </tr>

    <!-- Caption -->
    <tr>
        <td colspan="2">
            {{ i.post_description }}
        </td>
    </tr>

    <!-- Separator -->
    <tr>
        <td colspan="2"><hr></td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="2" align="center">No posts yet.</td>
    </tr>
    {% endfor %}
</table>

</body>
</html>

<script>
$(document).ready(function(){
    $('.like-btn').click(function(){
        var heart = $(this);
        var post_id = heart.data('post');

        $.ajax({
            url: "{% url 'Student:likepost' %}",
            type: "POST",
            data: {
                'post_id': post_id,
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response){
                if(response.liked){
                    heart.text('‚ù§Ô∏è'); 
                } else {
                    heart.text('ü§ç');
                }
            },
            error: function(){
                alert('Something went wrong!');
            }
        });
    });
});
</script>

</body>
</html>
